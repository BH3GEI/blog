import json; import re; from datetime import datetime; with open("list.json", "r", encoding="utf-8") as f: data = json.load(f); counter = 1; [item.update({"file": f"posts/{datetime.strptime(item[\"time\"], \"%Y-%m-%d\").strftime(\"%Y%m%d\")}-{counter}.md"}) or (counter := counter + 1) for item in data if re.search(r"[^a-zA-Z0-9./\-]", item["file"])]; with open("list.json", "w", encoding="utf-8") as f: json.dump(data, f, indent=4, ensure_ascii=False)
